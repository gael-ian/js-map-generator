<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Random map generator</title>

    <link rel="shortcut icon" type="image/png" href="ui/images/globe.png">
    
    <link rel="stylesheet" type="text/css" href="ui/stylesheets/reset.css">
    <link rel="stylesheet" type="text/css" href="ui/stylesheets/typo.css">
    <link rel="stylesheet" type="text/css" href="ui/stylesheets/layout.css">
  </head>
  <body>
  
    <div id="wrapper">
    
      <ul id="layers">
        <li><a id="draw-graph" href="#">Graph</a></li>
        <li><a id="draw-water" href="#">Water</a></li>
        <li><a id="draw-full"  href="#">Full</a></li>
      </ul>
      
      <canvas id="map" width="950" height="750"></canvas>
      
    </div>
    
    <!-- External libraries -->
    <script type="text/javascript" src="./lib/voronoi.js"></script>
    <script type="text/javascript" src="./lib/bitmap-data/Point.js"></script>
    <script type="text/javascript" src="./lib/bitmap-data/Rectangle.js"></script>
    <script type="text/javascript" src="./lib/bitmap-data/Matrix.js"></script>
    <script type="text/javascript" src="./lib/bitmap-data/Simplex.js"></script>
    <script type="text/javascript" src="./lib/bitmap-data/BitmapData.js"></script>
    
    <!-- Map -->
    <script type="text/javascript" src="./src/map.js"></script>
    
    <script type="text/javascript" src="./src/map/utils.js"></script>
    
    <script type="text/javascript" src="./src/map/core/dictionnary.js"></script>
    <script type="text/javascript" src="./src/map/core/stack.js"></script>
    
    <script type="text/javascript" src="./src/map/graph/point.js"></script>
    <script type="text/javascript" src="./src/map/graph/location.js"></script>
    <script type="text/javascript" src="./src/map/graph/corner.js"></script>
    <script type="text/javascript" src="./src/map/graph/center.js"></script>
    <script type="text/javascript" src="./src/map/graph/edge.js"></script>
    
    <script type="text/javascript" src="./src/map/build/shape/square.js"></script>
    <script type="text/javascript" src="./src/map/build/shape/circle.js"></script>
    <script type="text/javascript" src="./src/map/build/shape/radial.js"></script>
    <script type="text/javascript" src="./src/map/build/shape/perlin.js"></script>
    
    <script type="text/javascript" src="./src/map/builder.js"></script>
    <script type="text/javascript" src="./src/map/drawer.js"></script>
    
    <script type="text/javascript">
    
      var canvas        = document.getElementById('map')
        , builder       = new map.builder(canvas)
        
        , water_drawer  = new map.drawer(canvas)
        , graph_drawer  = new map.drawer(canvas)
        , full_drawer   = new map.drawer(canvas)
        ;

      // Setup builder
      builder.setShape(map.build.shape.perlin);
      
      builder.build();
      
      water_drawer.steps = water_drawer.defaultSteps();
      water_drawer.steps.removeAfter('Draw water');
      
      graph_drawer.steps = graph_drawer.defaultSteps();
      graph_drawer.steps.removeBefore('Draw edges');
      graph_drawer.steps.removeAfter('Draw corners');
      
      document.getElementById('draw-water').addEventListener('click', function(e) {
        e.preventDefault();
        water_drawer.clear();
        water_drawer.draw(builder);
      }, false);
      
      document.getElementById('draw-graph').addEventListener('click', function(e) {
        e.preventDefault();
        graph_drawer.clear();
        graph_drawer.draw(builder);
      }, false);
      
      document.getElementById('draw-full').addEventListener('click', function(e) {
        e.preventDefault();
        full_drawer.clear();
        full_drawer.draw(builder);
      }, false);
      
      full_drawer.draw(builder);
      
    </script>
  </body>
</html>